!function(e){function t(t){for(var n,o,i=t[0],a=t[1],c=t[2],d=0,y=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(l,o)&&l[o]&&y.push(l[o][0]),l[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(u&&u(t);y.length;)y.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var a=r[i];0!==l[a]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},l={0:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=a;s.push(["tjUo",1]),r()}({"0TlM":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cyrb53=void 0,t.cyrb53=(e,t=0)=>{let r=3735928559^t,n=1103547991^t;for(let t,l=0;l<e.length;l++)t=e.charCodeAt(l),r=Math.imul(r^t,2654435761),n=Math.imul(n^t,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&n)+(r>>>0)}},"1/lR":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Journal=void 0;const n=r("q1tI"),l=r("7DOu"),s=r("jvG5");t.Journal=e=>{const[t,r]=n.useState(null);return n.createElement("div",{style:{width:"100vw",height:"100vh",backgroundColor:"grey",display:"flex",alignItems:"center"}},n.createElement(l.EntryList,{entries:e.entries,selectEntry:r,selectedEntry:t}),n.createElement(s.EditorPane,{selectedEntry:t}))}},"4AsC":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JournalEntry=void 0;t.JournalEntry=class{constructor(e,t,r=(()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))()){this.date=e,this.text=t,this.id=r}slug(){return this.text.substring(0,7)+"..."}}},"7DOu":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryList=void 0;const n=r("q1tI"),l=r("0TlM"),s=r("fsJt"),o=e=>{const t=e.selectedEntry===e.entry;return n.createElement("div",{className:t?"entry selected":"entry",style:{backgroundColor:t?"red":"white"},onClick:()=>{e.selectEntry(e.entry)}},e.entry.slug())},i=e=>n.createElement("div",{className:"date","data-date":e.date},n.createElement("h1",null,e.date),e.entries.map(t=>n.createElement(o,{key:l.cyrb53(t.slug()),entry:t,selectEntry:e.selectEntry,selectedEntry:e.selectedEntry})));t.EntryList=e=>{const t=e.entries.reduce((e,t)=>{const r=(n=t.date)instanceof s.DateString?n.withoutTime():new s.DateString(n).withoutTime();var n;return e[r]||(e[r]=[]),e[r].push(t),e},{});return n.createElement("div",{className:"listing",style:{borderRight:"black 5px solid",width:"10%",backgroundColor:"white",height:"96%"}},Object.keys(t).map(r=>{const s=l.cyrb53(r);return n.createElement(i,{key:s,date:r,entries:t[r],selectEntry:e.selectEntry,selectedEntry:e.selectedEntry})}))}},fsJt:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateString=t.MustBeAValidDateString=void 0;class n extends Error{constructor(e){super(`"${e}" is not a valid date string. it should be an ISO-8601 string`)}}t.MustBeAValidDateString=n;t.DateString=class{constructor(e){if(Number.isNaN(Date.parse(e)))throw new n(e);this.ds=e}asString(){return this.ds}withoutTime(){return this.ds.split("T")[0]}}},jvG5:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditorPane=void 0;const n=r("q1tI"),l=e=>e.selectedEntry&&(e.selectedEntry.text||"");t.EditorPane=e=>{const t=l(e);console.log({initialState:t,selected:e.selectedEntry});const[r,s]=n.useState(t);n.useEffect(()=>{const t=l(e);t!==r&&s(t)},[e.selectedEntry]);const o=l(e),i={display:"flex",flexDirection:"column"},a={width:"93%",margin:"1% 2%",height:"90%"};return n.createElement("div",{style:{flexGrow:1,backgroundColor:"white",height:"96%"},className:"editor"},n.createElement("div",{style:i},n.createElement("div",{className:"edit-pane",style:a},n.createElement("label",null,"Journal Entry",n.createElement("textarea",{style:{width:"93%",margin:"1% 2%",height:"90%"},value:r,onChange:t=>{const r=t.target.value;s(r),e.selectedEntry.text=r}}))),n.createElement("div",{className:"rendered",style:a},o)))}},tjUo:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("q1tI"),l=r("i8i4"),s=r("1/lR"),o=r("fsJt"),i=r("4AsC"),a=new i.JournalEntry(new o.DateString("2020-07-18T22:10:06Z"),"one","firsty"),c=new i.JournalEntry(new o.DateString("2020-07-17T23:10:06Z"),"two","secondy");l.hydrate(n.createElement(s.Journal,{entries:[a,c]}),document.getElementById("root"))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZhbmN5SGFzaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvam91cm5hbC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL0pvdXJuYWxFbnRyeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW50cnlMaXN0LnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0ZVN0cmluZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWRpdG9yLnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHN4Il0sIm5hbWVzIjpbIndlYnBhY2tKc29ucENhbGxiYWNrIiwiZGF0YSIsIm1vZHVsZUlkIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJleGVjdXRlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiZGVmZXJyZWRNb2R1bGVzIiwiYXBwbHkiLCJjaGVja0RlZmVycmVkTW9kdWxlcyIsInJlc3VsdCIsImRlZmVycmVkTW9kdWxlIiwiZnVsZmlsbGVkIiwiaiIsImRlcElkIiwic3BsaWNlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiMCIsImV4cG9ydHMiLCJtb2R1bGUiLCJsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInAiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiY3lyYjUzIiwic3RyIiwic2VlZCIsImgxIiwiaDIiLCJjaCIsImNoYXJDb2RlQXQiLCJNYXRoIiwiaW11bCIsIkpvdXJuYWwiLCJwcm9wcyIsInNlbGVjdGVkRW50cnkiLCJzZXRTZWxlY3RlZEVudHJ5IiwiUmVhY3QiLCJ1c2VTdGF0ZSIsInN0eWxlIiwid2lkdGgiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsIkVudHJ5TGlzdCIsImVudHJpZXMiLCJzZWxlY3RFbnRyeSIsIkVkaXRvclBhbmUiLCJkYXRlIiwidGV4dCIsImlkIiwicmVwbGFjZSIsInJhbmRvbSIsInRvU3RyaW5nIiwidXVpZHY0IiwidGhpcyIsInN1YnN0cmluZyIsIkVudHJ5IiwiaXNTZWxlY3RlZCIsImVudHJ5IiwiY2xhc3NOYW1lIiwib25DbGljayIsInNsdWciLCJEYXRlR3JvdXAiLCJtYXAiLCJsaXN0aW5nQnlEYXRlIiwicmVkdWNlIiwiYWNjIiwiZGF0ZUtleSIsIngiLCJEYXRlU3RyaW5nIiwid2l0aG91dFRpbWUiLCJib3JkZXJSaWdodCIsImtleXMiLCJkayIsImhhc2hlZERhdGUiLCJNdXN0QmVBVmFsaWREYXRlU3RyaW5nIiwiRXJyb3IiLCJkYXRlU3RyaW5nIiwic3VwZXIiLCJOdW1iZXIiLCJpc05hTiIsIkRhdGUiLCJwYXJzZSIsImRzIiwic3BsaXQiLCJzYWZlbHlSZWFkVGV4dCIsImluaXRpYWxTdGF0ZSIsImNvbnNvbGUiLCJsb2ciLCJzZWxlY3RlZCIsImVudHJ5VGV4dCIsInNldEVudHJ5VGV4dCIsInVzZUVmZmVjdCIsInJlbmRlcmVkVGV4dCIsImVkaXRXcmFwcGVyU3R5bGUiLCJmbGV4RGlyZWN0aW9uIiwicGFuZVN0eWxlIiwibWFyZ2luIiwiZmxleEdyb3ciLCJvbkNoYW5nZSIsImUiLCJuZXdUZXh0IiwidGFyZ2V0IiwiYSIsIkpvdXJuYWxFbnRyeSIsImIiLCJoeWRyYXRlIiwiZG9jdW1lbnQiLCJn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QU9xQyxFQUFlckQsR0FDeEJnQixJQUFTMEMsR0FDWEMsRUFBYTNDLElBRWQsQ0FBQ2hCLEVBQU1DLGdCQUVWLE1BQU00RCxFQUFlUixFQUFlckQsR0FpQjlCOEQsRUFBbUIsQ0FDdkJyRCxRQUFTLE9BQ1RzRCxjQUg4QixVQU0xQkMsRUFBWSxDQUNoQjFELE1BQU8sTUFDUDJELE9BQVEsUUFDUjFELE9BQVEsT0FTVixPQUNFLHVCQUFLRixNQTNCYSxDQUNsQjZELFNBQVUsRUFDVjFELGdCQUFpQixRQUNqQkQsT0FBUSxPQXdCaUJvQixVQUFVLFVBQ2pDLHVCQUFLdEIsTUFBT3lELEdBQ1YsdUJBQUtuQyxVQUFVLFlBQVl0QixNQUFPMkQsR0FDaEMsNkIsZ0JBRUUsNEJBQ0UzRCxNQWJVLENBQ3BCQyxNQUFPLE1BQ1AyRCxPQUFRLFFBQ1IxRCxPQUFRLE9BV0VqQyxNQUFPb0YsRUFDUFMsU0F6Q1NDLElBQ25CLE1BQU1DLEVBQVVELEVBQUVFLE9BQU9oRyxNQUN6QnFGLEVBQWFVLEdBQ2JyRSxFQUFNQyxjQUFjZSxLQUFPcUQsT0EwQ3ZCLHVCQUFLMUMsVUFBVSxXQUFXdEIsTUFBTzJELEdBQzlCSCxPLG1GQ3pFWCxrQkFDQSxZQUNBLFlBQ0EsWUFDQSxZQUVNVSxFQUFJLElBQUksRUFBQUMsYUFBYSxJQUFJLEVBQUFuQyxXQUFXLHdCQUN4QyxNQUNBLFVBRUlvQyxFQUFJLElBQUksRUFBQUQsYUFBYSxJQUFJLEVBQUFuQyxXQUFXLHdCQUN4QyxNQUNBLFdBRUYsRUFBQXFDLFFBQVEsZ0JBQUMsRUFBQTNFLFFBQU8sQ0FBQ2EsUUFBUyxDQUFDMkQsRUFBR0UsS0FBUUUsU0FBU0MsZUFBZSIsImZpbGUiOiJtYWluLjJjZDE4OTQ3MGE1N2NhODJiZDE0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhkYXRhKSB7XG4gXHRcdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG4gXHRcdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG4gXHRcdHZhciBleGVjdXRlTW9kdWxlcyA9IGRhdGFbMl07XG5cbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCByZXNvbHZlcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdHJlc29sdmVzLnB1c2goaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKTtcbiBcdFx0XHR9XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oZGF0YSk7XG5cbiBcdFx0d2hpbGUocmVzb2x2ZXMubGVuZ3RoKSB7XG4gXHRcdFx0cmVzb2x2ZXMuc2hpZnQoKSgpO1xuIFx0XHR9XG5cbiBcdFx0Ly8gYWRkIGVudHJ5IG1vZHVsZXMgZnJvbSBsb2FkZWQgY2h1bmsgdG8gZGVmZXJyZWQgbGlzdFxuIFx0XHRkZWZlcnJlZE1vZHVsZXMucHVzaC5hcHBseShkZWZlcnJlZE1vZHVsZXMsIGV4ZWN1dGVNb2R1bGVzIHx8IFtdKTtcblxuIFx0XHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIGFsbCBjaHVua3MgcmVhZHlcbiBcdFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4gXHR9O1xuIFx0ZnVuY3Rpb24gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKSB7XG4gXHRcdHZhciByZXN1bHQ7XG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHR2YXIgZGVmZXJyZWRNb2R1bGUgPSBkZWZlcnJlZE1vZHVsZXNbaV07XG4gXHRcdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG4gXHRcdFx0Zm9yKHZhciBqID0gMTsgaiA8IGRlZmVycmVkTW9kdWxlLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHR2YXIgZGVwSWQgPSBkZWZlcnJlZE1vZHVsZVtqXTtcbiBcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tkZXBJZF0gIT09IDApIGZ1bGZpbGxlZCA9IGZhbHNlO1xuIFx0XHRcdH1cbiBcdFx0XHRpZihmdWxmaWxsZWQpIHtcbiBcdFx0XHRcdGRlZmVycmVkTW9kdWxlcy5zcGxpY2UoaS0tLCAxKTtcbiBcdFx0XHRcdHJlc3VsdCA9IF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gZGVmZXJyZWRNb2R1bGVbMF0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdHJldHVybiByZXN1bHQ7XG4gXHR9XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbiBcdC8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHQwOiAwXG4gXHR9O1xuXG4gXHR2YXIgZGVmZXJyZWRNb2R1bGVzID0gW107XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wXCJdID0gd2luZG93W1wid2VicGFja0pzb25wXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBhZGQgZW50cnkgbW9kdWxlIHRvIGRlZmVycmVkIGxpc3RcbiBcdGRlZmVycmVkTW9kdWxlcy5wdXNoKFtcInRqVW9cIiwxXSk7XG4gXHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIHJlYWR5XG4gXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiIsImV4cG9ydCBjb25zdCBjeXJiNTMgPSAoc3RyOiBzdHJpbmcsIHNlZWQgPSAwKSA9PiB7XG4gIGxldCBoMSA9IDB4ZGVhZGJlZWYgXiBzZWVkXG4gIGxldCBoMiA9IDB4NDFjNmNlNTcgXiBzZWVkXG5cbiAgZm9yIChsZXQgaSA9IDAsIGNoOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgY2ggPSBzdHIuY2hhckNvZGVBdChpKVxuICAgIGgxID0gTWF0aC5pbXVsKGgxIF4gY2gsIDI2NTQ0MzU3NjEpXG4gICAgaDIgPSBNYXRoLmltdWwoaDIgXiBjaCwgMTU5NzMzNDY3NylcbiAgfVxuICBoMSA9IE1hdGguaW11bChoMSBeIGgxID4+PiAxNiwgMjI0NjgyMjUwNykgXiBNYXRoLmltdWwoaDIgXiBoMiA+Pj4gMTMsIDMyNjY0ODk5MDkpXG4gIGgyID0gTWF0aC5pbXVsKGgyIF4gaDIgPj4+IDE2LCAyMjQ2ODIyNTA3KSBeIE1hdGguaW11bChoMSBeIGgxID4+PiAxMywgMzI2NjQ4OTkwOSlcbiAgcmV0dXJuIDQyOTQ5NjcyOTYgKiAoMjA5NzE1MSAmIGgyKSArIChoMSA+Pj4gMClcbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgRW50cnlMaXN0IH0gZnJvbSAnLi9lbnRyeUxpc3QnXG5pbXBvcnQgeyBKb3VybmFsRW50cnkgfSBmcm9tICcuL0pvdXJuYWxFbnRyeSdcbmltcG9ydCB7IEVkaXRvclBhbmUgfSBmcm9tICcuL2VkaXRvcidcblxuZXhwb3J0IGludGVyZmFjZSBKb3VybmFsUHJvcHMge1xuICAgIGVudHJpZXM6IEpvdXJuYWxFbnRyeVtdO1xufVxuXG5leHBvcnQgY29uc3QgSm91cm5hbCA9IChwcm9wczogSm91cm5hbFByb3BzKSA9PiB7XG4gIGNvbnN0IFtzZWxlY3RlZEVudHJ5LCBzZXRTZWxlY3RlZEVudHJ5XSA9IFJlYWN0LnVzZVN0YXRlKG51bGwpXG5cbiAgY29uc3Qgc3R5bGVzID0ge1xuICAgIHdpZHRoOiAnMTAwdncnLFxuICAgIGhlaWdodDogJzEwMHZoJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICdncmV5JyxcbiAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcidcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17c3R5bGVzfT5cbiAgICAgIDxFbnRyeUxpc3RcbiAgICAgICAgZW50cmllcz17cHJvcHMuZW50cmllc30gc2VsZWN0RW50cnk9e3NldFNlbGVjdGVkRW50cnl9XG4gICAgICAgIHNlbGVjdGVkRW50cnk9e3NlbGVjdGVkRW50cnl9XG4gICAgICAvPlxuICAgICAgPEVkaXRvclBhbmUgc2VsZWN0ZWRFbnRyeT17c2VsZWN0ZWRFbnRyeX0gLz5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIiwiaW1wb3J0IHsgRGF0ZVN0cmluZyB9IGZyb20gJy4vZGF0ZVN0cmluZydcblxuY29uc3QgdXVpZHY0ID0gKCkgPT5cbiAgJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLFxuICAgIGMgPT4ge1xuICAgICAgY29uc3QgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDBcbiAgICAgIGNvbnN0IHYgPSBjID09PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpXG4gICAgICByZXR1cm4gdi50b1N0cmluZygxNilcbiAgICB9KVxuXG5leHBvcnQgY2xhc3MgSm91cm5hbEVudHJ5IHtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tdXNlbGVzcy1jb25zdHJ1Y3RvciAqL1xuICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIHJlYWRvbmx5IGRhdGU6IERhdGVTdHJpbmcsXG4gICAgICAgIHB1YmxpYyB0ZXh0OiBzdHJpbmcsXG4gICAgICAgIHJlYWRvbmx5IGlkOiBzdHJpbmcgPSB1dWlkdjQoKSkge1xuICB9XG5cbiAgc2x1ZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGV4dC5zdWJzdHJpbmcoMCwgNykgKyAnLi4uJ1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IGN5cmI1MyB9IGZyb20gJy4vZmFuY3lIYXNoJ1xuaW1wb3J0IHsgRGF0ZVN0cmluZyB9IGZyb20gJy4vZGF0ZVN0cmluZydcbmltcG9ydCB7IEpvdXJuYWxFbnRyeSB9IGZyb20gJy4vSm91cm5hbEVudHJ5J1xuXG5pbnRlcmZhY2UgQ2FuU2VsZWN0RW50cnkge1xuICAgIHNlbGVjdEVudHJ5OiAoZTogSm91cm5hbEVudHJ5KSA9PiB2b2lkO1xuICAgIHNlbGVjdGVkRW50cnk6IEpvdXJuYWxFbnRyeTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbnRyeUxpc3RQcm9wc1xuICAgIGV4dGVuZHMgQ2FuU2VsZWN0RW50cnkge1xuICAgIGVudHJpZXM6IEpvdXJuYWxFbnRyeVtdO1xufVxuXG5pbnRlcmZhY2UgRGF0ZUdyb3VwUHJvcHNcbiAgICBleHRlbmRzIEVudHJ5TGlzdFByb3BzIHtcbiAgICBkYXRlOiBzdHJpbmcsXG59XG5cbmludGVyZmFjZSBFbnRyeVByb3BzXG4gICAgZXh0ZW5kcyBDYW5TZWxlY3RFbnRyeXtcbiAgICBlbnRyeTogSm91cm5hbEVudHJ5O1xufVxuXG5jb25zdCBFbnRyeSA9IChwcm9wczogRW50cnlQcm9wcykgPT4ge1xuICBjb25zdCBpc1NlbGVjdGVkID0gcHJvcHMuc2VsZWN0ZWRFbnRyeSA9PT0gcHJvcHMuZW50cnlcblxuICBjb25zdCBzZWxlY3QgPSAoKSA9PiB7XG4gICAgcHJvcHMuc2VsZWN0RW50cnkocHJvcHMuZW50cnkpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17aXNTZWxlY3RlZCA/ICdlbnRyeSBzZWxlY3RlZCcgOiAnZW50cnknfVxuICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBpc1NlbGVjdGVkID8gJ3JlZCcgOiAnd2hpdGUnIH19XG4gICAgICBvbkNsaWNrPXtzZWxlY3R9XG4gICAgPlxuICAgICAge3Byb3BzLmVudHJ5LnNsdWcoKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5jb25zdCBEYXRlR3JvdXAgPSAocHJvcHM6IERhdGVHcm91cFByb3BzKSA9PiB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J2RhdGUnIGRhdGEtZGF0ZT17cHJvcHMuZGF0ZX0+XG4gICAgICA8aDE+e3Byb3BzLmRhdGV9PC9oMT5cbiAgICAgIHtwcm9wcy5lbnRyaWVzLm1hcChsID0+XG4gICAgICAgIDxFbnRyeVxuICAgICAgICAgIGtleT17Y3lyYjUzKGwuc2x1ZygpKX0gZW50cnk9e2x9XG4gICAgICAgICAgc2VsZWN0RW50cnk9e3Byb3BzLnNlbGVjdEVudHJ5fVxuICAgICAgICAgIHNlbGVjdGVkRW50cnk9e3Byb3BzLnNlbGVjdGVkRW50cnl9XG4gICAgICAgIC8+KX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5jb25zdCBhc0RhdGVLZXkgPSAoeDogRGF0ZVN0cmluZyB8IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGlmICh4IGluc3RhbmNlb2YgRGF0ZVN0cmluZykge1xuICAgIHJldHVybiB4LndpdGhvdXRUaW1lKClcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IERhdGVTdHJpbmcoeCkud2l0aG91dFRpbWUoKVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBFbnRyeUxpc3QgPSAocHJvcHM6IEVudHJ5TGlzdFByb3BzKSA9PiB7XG4gIGNvbnN0IGluaXRpYWw6IHsgW2RhdGVLZXk6IHN0cmluZ106IEpvdXJuYWxFbnRyeVtdIH0gPSB7fVxuICBjb25zdCBsaXN0aW5nQnlEYXRlOiB7IFtkYXRlS2V5OiBzdHJpbmddOiBKb3VybmFsRW50cnlbXSB9ID1cbiAgICAgICAgcHJvcHMuZW50cmllcy5yZWR1Y2UoKGFjYywgbCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGVLZXkgPSBhc0RhdGVLZXkobC5kYXRlKVxuICAgICAgICAgIGlmICghYWNjW2RhdGVLZXldKSB7XG4gICAgICAgICAgICBhY2NbZGF0ZUtleV0gPSBbXVxuICAgICAgICAgIH1cbiAgICAgICAgICBhY2NbZGF0ZUtleV0ucHVzaChsKVxuICAgICAgICAgIHJldHVybiBhY2NcbiAgICAgICAgfSwgaW5pdGlhbClcblxuICBjb25zdCBzdHlsZXMgPSB7XG4gICAgYm9yZGVyUmlnaHQ6ICdibGFjayA1cHggc29saWQnLFxuICAgIHdpZHRoOiAnMTAlJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgaGVpZ2h0OiAnOTYlJ1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0nbGlzdGluZycgc3R5bGU9e3N0eWxlc30+XG4gICAgICB7T2JqZWN0LmtleXMobGlzdGluZ0J5RGF0ZSlcbiAgICAgICAgLm1hcChkayA9PiB7XG4gICAgICAgICAgY29uc3QgaGFzaGVkRGF0ZSA9IGN5cmI1MyhkaylcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPERhdGVHcm91cFxuICAgICAgICAgICAgICBrZXk9e2hhc2hlZERhdGV9IGRhdGU9e2RrfVxuICAgICAgICAgICAgICBlbnRyaWVzPXtsaXN0aW5nQnlEYXRlW2RrXX1cbiAgICAgICAgICAgICAgc2VsZWN0RW50cnk9e3Byb3BzLnNlbGVjdEVudHJ5fVxuICAgICAgICAgICAgICBzZWxlY3RlZEVudHJ5PXtwcm9wcy5zZWxlY3RlZEVudHJ5fVxuICAgICAgICAgICAgLz4pXG4gICAgICAgIH0pfVxuICAgIDwvZGl2PlxuICApXG59XG4iLCJleHBvcnQgY2xhc3MgTXVzdEJlQVZhbGlkRGF0ZVN0cmluZyBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IgKGRhdGVTdHJpbmc6IHN0cmluZykge1xuICAgIHN1cGVyKGBcIiR7ZGF0ZVN0cmluZ31cIiBpcyBub3QgYSB2YWxpZCBkYXRlIHN0cmluZy4gaXQgc2hvdWxkIGJlIGFuIElTTy04NjAxIHN0cmluZ2ApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERhdGVTdHJpbmcge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgZHM6IHN0cmluZ1xuXG4gICAgY29uc3RydWN0b3IgKHM6IHN0cmluZykge1xuICAgICAgaWYgKE51bWJlci5pc05hTihEYXRlLnBhcnNlKHMpKSkge1xuICAgICAgICB0aHJvdyBuZXcgTXVzdEJlQVZhbGlkRGF0ZVN0cmluZyhzKVxuICAgICAgfVxuXG4gICAgICB0aGlzLmRzID0gc1xuICAgIH1cblxuICAgIGFzU3RyaW5nICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmRzXG4gICAgfVxuXG4gICAgd2l0aG91dFRpbWUgKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZHMuc3BsaXQoJ1QnKVswXVxuICAgIH1cbn1cbiIsImltcG9ydCB7IEpvdXJuYWxFbnRyeSB9IGZyb20gJy4vSm91cm5hbEVudHJ5J1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnXG5cbmludGVyZmFjZSBFZGl0b3JQcm9wcyB7XG4gICAgc2VsZWN0ZWRFbnRyeTogSm91cm5hbEVudHJ5XG59XG5cbmNvbnN0IHNhZmVseVJlYWRUZXh0ID0gKHByb3BzOiBFZGl0b3JQcm9wcykgPT5cbiAgcHJvcHMuc2VsZWN0ZWRFbnRyeSAmJiAocHJvcHMuc2VsZWN0ZWRFbnRyeS50ZXh0IHx8ICcnKVxuXG5leHBvcnQgY29uc3QgRWRpdG9yUGFuZSA9IChwcm9wczogRWRpdG9yUHJvcHMpID0+IHtcbiAgY29uc3QgaW5pdGlhbFN0YXRlID0gc2FmZWx5UmVhZFRleHQocHJvcHMpXG4gIGNvbnNvbGUubG9nKHtcbiAgICBpbml0aWFsU3RhdGUsXG4gICAgc2VsZWN0ZWQ6IHByb3BzLnNlbGVjdGVkRW50cnlcbiAgfSlcbiAgY29uc3QgW2VudHJ5VGV4dCwgc2V0RW50cnlUZXh0XSA9IFJlYWN0LnVzZVN0YXRlKGluaXRpYWxTdGF0ZSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHRleHQgPSBzYWZlbHlSZWFkVGV4dChwcm9wcylcbiAgICBpZiAodGV4dCAhPT0gZW50cnlUZXh0KSB7XG4gICAgICBzZXRFbnRyeVRleHQodGV4dClcbiAgICB9XG4gIH0sIFtwcm9wcy5zZWxlY3RlZEVudHJ5XSlcblxuICBjb25zdCByZW5kZXJlZFRleHQgPSBzYWZlbHlSZWFkVGV4dChwcm9wcylcblxuICBjb25zdCB0ZXh0Q2hhbmdlZCA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MVGV4dEFyZWFFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IG5ld1RleHQgPSBlLnRhcmdldC52YWx1ZVxuICAgIHNldEVudHJ5VGV4dChuZXdUZXh0KVxuICAgIHByb3BzLnNlbGVjdGVkRW50cnkudGV4dCA9IG5ld1RleHRcbiAgfVxuXG4gIGNvbnN0IGVkaXRvclN0eWxlID0ge1xuICAgIGZsZXhHcm93OiAxLFxuICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJyxcbiAgICBoZWlnaHQ6ICc5NiUnXG4gIH1cblxuICAvLyBoZXJlJ3Mgc29tZSBmdW4uIG5lZWQgdG8gZGVjbGFyZSB0aGlzIGlzIHRoZSBpbW11dGFibGUgc3RyaW5nIFwiY29sdW1uXG4gIC8vIGZvciBzb21lIHJlYXNvbiB0eXBlc2NyaXB0IGNhbid0IHVzZSB0aGUgcmVndWxhciBzdHJpbmcgwq9cXF8o44OEKV8vwq9cbiAgY29uc3QgZmxleERpcmVjdGlvbjogJ2NvbHVtbicgPSAnY29sdW1uJ1xuICBjb25zdCBlZGl0V3JhcHBlclN0eWxlID0ge1xuICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICBmbGV4RGlyZWN0aW9uOiBmbGV4RGlyZWN0aW9uXG4gIH1cblxuICBjb25zdCBwYW5lU3R5bGUgPSB7XG4gICAgd2lkdGg6ICc5MyUnLFxuICAgIG1hcmdpbjogJzElIDIlJyxcbiAgICBoZWlnaHQ6ICc5MCUnXG4gIH1cblxuICBjb25zdCB0ZXh0QXJlYVN0eWxlID0ge1xuICAgIHdpZHRoOiAnOTMlJyxcbiAgICBtYXJnaW46ICcxJSAyJScsXG4gICAgaGVpZ2h0OiAnOTAlJ1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHN0eWxlPXtlZGl0b3JTdHlsZX0gY2xhc3NOYW1lPSdlZGl0b3InPlxuICAgICAgPGRpdiBzdHlsZT17ZWRpdFdyYXBwZXJTdHlsZX0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlZGl0LXBhbmUnIHN0eWxlPXtwYW5lU3R5bGV9PlxuICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIEpvdXJuYWwgRW50cnlcbiAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICBzdHlsZT17dGV4dEFyZWFTdHlsZX1cbiAgICAgICAgICAgICAgdmFsdWU9e2VudHJ5VGV4dH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3RleHRDaGFuZ2VkfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JlbmRlcmVkJyBzdHlsZT17cGFuZVN0eWxlfT5cbiAgICAgICAgICB7cmVuZGVyZWRUZXh0fVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IGh5ZHJhdGUgfSBmcm9tICdyZWFjdC1kb20nXG5pbXBvcnQgeyBKb3VybmFsIH0gZnJvbSAnLi9qb3VybmFsJ1xuaW1wb3J0IHsgRGF0ZVN0cmluZyB9IGZyb20gJy4vZGF0ZVN0cmluZydcbmltcG9ydCB7IEpvdXJuYWxFbnRyeSB9IGZyb20gJy4vSm91cm5hbEVudHJ5J1xuXG5jb25zdCBhID0gbmV3IEpvdXJuYWxFbnRyeShuZXcgRGF0ZVN0cmluZygnMjAyMC0wNy0xOFQyMjoxMDowNlonKSxcbiAgJ29uZScsXG4gICdmaXJzdHknXG4pXG5jb25zdCBiID0gbmV3IEpvdXJuYWxFbnRyeShuZXcgRGF0ZVN0cmluZygnMjAyMC0wNy0xN1QyMzoxMDowNlonKSxcbiAgJ3R3bycsXG4gICdzZWNvbmR5J1xuKVxuaHlkcmF0ZSg8Sm91cm5hbCBlbnRyaWVzPXtbYSwgYl19IC8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==