!function(e){function t(t){for(var n,i,o=t[0],a=t[1],c=t[2],d=0,y=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(l,i)&&l[i]&&y.push(l[i][0]),l[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(u&&u(t);y.length;)y.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var a=r[o];0!==l[a]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},l={0:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window.webpackJsonp=window.webpackJsonp||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=a;s.push(["tjUo",1]),r()}({"0TlM":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cyrb53=void 0,t.cyrb53=(e,t=0)=>{let r=3735928559^t,n=1103547991^t;for(let t,l=0;l<e.length;l++)t=e.charCodeAt(l),r=Math.imul(r^t,2654435761),n=Math.imul(n^t,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&n)+(r>>>0)}},"1/lR":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Journal=void 0;const n=r("q1tI"),l=r("7DOu");function s(e){return e.selectedEntry&&e.selectedEntry.text||""}const i=e=>{const t=s(e);console.log({initialState:t,selected:e.selectedEntry});const[r,l]=n.useState(t);n.useEffect(()=>{const t=s(e);t!==r&&l(t)},[e.selectedEntry]);const i=e.selectedEntry&&e.selectedEntry.text||"",o={display:"flex",flexDirection:"column"},a={width:"93%",margin:"1% 2%",height:"90%"};return n.createElement("div",{style:{flexGrow:1,backgroundColor:"white",height:"96%"},className:"editor"},n.createElement("div",{style:o},n.createElement("div",{className:"edit-pane",style:a},n.createElement("label",null,"Journal Entry",n.createElement("textarea",{style:{width:"93%",margin:"1% 2%",height:"90%"},value:r,onChange:e=>{const t=e.target.value;l(t)}}))),n.createElement("div",{className:"rendered",style:a},i)))};t.Journal=e=>{const[t,r]=n.useState(null);return n.createElement("div",{style:{width:"100vw",height:"100vh",backgroundColor:"grey",display:"flex",alignItems:"center"}},n.createElement(l.EntryList,{entries:e.entries,selectEntry:r,selectedEntry:t}),n.createElement(i,{selectedEntry:t}))}},"4AsC":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JournalEntry=void 0;t.JournalEntry=class{constructor(e,t,r,n=(()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))()){this.date=e,this.title=t,this.text=r,this.id=n}}},"7DOu":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryList=void 0;const n=r("q1tI"),l=r("0TlM"),s=r("fsJt"),i=e=>{let t=e.selectedEntry==e.entry;return n.createElement("div",{className:t?"entry selected":"entry",style:{backgroundColor:t?"red":"white"},onClick:()=>{e.selectEntry(e.entry)}},e.entry.title)},o=e=>n.createElement("div",{className:"date","data-date":e.date},n.createElement("h1",null,e.date),e.entries.map(t=>n.createElement(i,{key:l.cyrb53(t.title),entry:t,selectEntry:e.selectEntry,selectedEntry:e.selectedEntry})));t.EntryList=e=>{const t=e.entries.reduce((e,t)=>{const r=(n=t.date)instanceof s.DateString?n.withoutTime():new s.DateString(n).withoutTime();var n;return e[r]||(e[r]=[]),e[r].push(t),e},{});return n.createElement("div",{className:"listing",style:{borderRight:"black 5px solid",width:"10%",backgroundColor:"white",height:"96%"}},Object.keys(t).map(r=>{const s=l.cyrb53(r);return n.createElement(o,{key:s,date:r,entries:t[r],selectEntry:e.selectEntry,selectedEntry:e.selectedEntry})}))}},fsJt:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateString=t.MustBeAValidDateString=void 0;class n extends Error{constructor(e){super(`"${e}" is not a valid date string. it should be an ISO-8601 string`)}}t.MustBeAValidDateString=n;t.DateString=class{constructor(e){if(Number.isNaN(Date.parse(e)))throw new n(e);this.ds=e}asString(){return this.ds}withoutTime(){return this.ds.split("T")[0]}}},tjUo:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("q1tI"),l=r("i8i4"),s=r("1/lR"),i=r("fsJt"),o=r("4AsC"),a=new o.JournalEntry(new i.DateString("2020-07-18T22:10:06Z"),"one","firsty"),c=new o.JournalEntry(new i.DateString("2020-07-17T23:10:06Z"),"two","secondy");l.hydrate(n.createElement(s.Journal,{entries:[a,c]}),document.getElementById("root"))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZhbmN5SGFzaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvam91cm5hbC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL0pvdXJuYWxFbnRyeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW50cnlMaXN0LnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0ZVN0cmluZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHN4Il0sIm5hbWVzIjpbIndlYnBhY2tKc29ucENhbGxiYWNrIiwiZGF0YSIsIm1vZHVsZUlkIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJleGVjdXRlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiZGVmZXJyZWRNb2R1bGVzIiwiYXBwbHkiLCJjaGVja0RlZmVycmVkTW9kdWxlcyIsInJlc3VsdCIsImRlZmVycmVkTW9kdWxlIiwiZnVsZmlsbGVkIiwiaiIsImRlcElkIiwic3BsaWNlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiMCIsImV4cG9ydHMiLCJtb2R1bGUiLCJsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInAiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiY3lyYjUzIiwic3RyIiwic2VlZCIsImgxIiwiaDIiLCJjaCIsImNoYXJDb2RlQXQiLCJNYXRoIiwiaW11bCIsInNhZmVseVJlYWRUZXh0IiwicHJvcHMiLCJzZWxlY3RlZEVudHJ5IiwidGV4dCIsIkVkaXRvclBhbmUiLCJpbml0aWFsU3RhdGUiLCJjb25zb2xlIiwibG9nIiwic2VsZWN0ZWQiLCJlbnRyeVRleHQiLCJzZXRFbnRyeVRleHQiLCJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwicmVuZGVyZWRUZXh0IiwiZWRpdFdyYXBwZXJTdHlsZSIsImRpc3BsYXkiLCJmbGV4RGlyZWN0aW9uIiwicGFuZVN0eWxlIiwid2lkdGgiLCJtYXJnaW4iLCJoZWlnaHQiLCJzdHlsZSIsImZsZXhHcm93IiwiYmFja2dyb3VuZENvbG9yIiwiY2xhc3NOYW1lIiwib25DaGFuZ2UiLCJlIiwibmV3VGV4dCIsInRhcmdldCIsIkpvdXJuYWwiLCJzZXRTZWxlY3RlZEVudHJ5IiwiYWxpZ25JdGVtcyIsIkVudHJ5TGlzdCIsImVudHJpZXMiLCJzZWxlY3RFbnRyeSIsImRhdGUiLCJ0aXRsZSIsImlkIiwicmVwbGFjZSIsInJhbmRvbSIsInRvU3RyaW5nIiwidXVpZHY0IiwiRW50cnkiLCJpc1NlbGVjdGVkIiwiZW50cnkiLCJvbkNsaWNrIiwiRGF0ZUdyb3VwIiwibWFwIiwibGlzdGluZ0J5RGF0ZSIsInJlZHVjZSIsImFjYyIsImRhdGVLZXkiLCJ4IiwiRGF0ZVN0cmluZyIsIndpdGhvdXRUaW1lIiwiYm9yZGVyUmlnaHQiLCJrZXlzIiwiZGsiLCJoYXNoZWREYXRlIiwiTXVzdEJlQVZhbGlkRGF0ZVN0cmluZyIsIkVycm9yIiwiZGF0ZVN0cmluZyIsInN1cGVyIiwiTnVtYmVyIiwiaXNOYU4iLCJEYXRlIiwicGFyc2UiLCJ0aGlzIiwiZHMiLCJzcGxpdCIsImEiLCJKb3VybmFsRW50cnkiLCJiIiwiaHlkcmF0ZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJhQUNFLFNBQVNBLEVB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akJILE9BQVEsUUFLSG5GLE9BQU91SCxLQUFLUixHQUNSRCxJQUFJVSxJQUNELE1BQU1DLEVBQWEsRUFBQXBFLE9BQU9tRSxHQUMxQixPQUNJLGdCQUFDWCxFQUFTLENBQUNsRSxJQUFLOEUsRUFBWXZCLEtBQU1zQixFQUN2QnhCLFFBQVNlLEVBQWNTLEdBQ3ZCdkIsWUFBYWxDLEVBQU1rQyxZQUNuQmpDLGNBQWVELEVBQU1DLHFCLGdJQzVGeEQsTUFBYTBELFVBQStCQyxNQUMxQyxZQUFhQyxHQUNYQyxNQUFNLElBQUlELG1FQUZkLDJCQU1BLG1CQUdJLFlBQWF6RyxHQUNYLEdBQUkyRyxPQUFPQyxNQUFNQyxLQUFLQyxNQUFNOUcsSUFDMUIsTUFBTSxJQUFJdUcsRUFBdUJ2RyxHQUduQytHLEtBQUtDLEdBQUtoSCxFQUdaLFdBQ0UsT0FBTytHLEtBQUtDLEdBR2QsY0FDRSxPQUFPRCxLQUFLQyxHQUFHQyxNQUFNLEtBQUssTSxtRkN0QmhDLGtCQUNBLFlBQ0EsWUFDQSxZQUNBLFlBRU1DLEVBQUksSUFBSSxFQUFBQyxhQUFhLElBQUksRUFBQWxCLFdBQVcsd0JBQ3hDLE1BQ0EsVUFFSW1CLEVBQUksSUFBSSxFQUFBRCxhQUFhLElBQUksRUFBQWxCLFdBQVcsd0JBQ3hDLE1BQ0EsV0FFRixFQUFBb0IsUUFBUSxnQkFBQyxFQUFBNUMsUUFBTyxDQUFDSSxRQUFTLENBQUNxQyxFQUFHRSxLQUFRRSxTQUFTQyxlQUFlIiwiZmlsZSI6Im1haW4uNjU2Y2E3NGY5MTM1ZWVhYjdhNGMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDA6IDBcbiBcdH07XG5cbiBcdHZhciBkZWZlcnJlZE1vZHVsZXMgPSBbXTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goW1widGpVb1wiLDFdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiZXhwb3J0IGNvbnN0IGN5cmI1MyA9IChzdHI6IHN0cmluZywgc2VlZCA9IDApID0+IHtcbiAgbGV0IGgxID0gMHhkZWFkYmVlZiBeIHNlZWRcbiAgbGV0IGgyID0gMHg0MWM2Y2U1NyBeIHNlZWRcblxuICBmb3IgKGxldCBpID0gMCwgY2g7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBjaCA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaDEgPSBNYXRoLmltdWwoaDEgXiBjaCwgMjY1NDQzNTc2MSlcbiAgICBoMiA9IE1hdGguaW11bChoMiBeIGNoLCAxNTk3MzM0Njc3KVxuICB9XG4gIGgxID0gTWF0aC5pbXVsKGgxIF4gaDEgPj4+IDE2LCAyMjQ2ODIyNTA3KSBeIE1hdGguaW11bChoMiBeIGgyID4+PiAxMywgMzI2NjQ4OTkwOSlcbiAgaDIgPSBNYXRoLmltdWwoaDIgXiBoMiA+Pj4gMTYsIDIyNDY4MjI1MDcpIF4gTWF0aC5pbXVsKGgxIF4gaDEgPj4+IDEzLCAzMjY2NDg5OTA5KVxuICByZXR1cm4gNDI5NDk2NzI5NiAqICgyMDk3MTUxICYgaDIpICsgKGgxID4+PiAwKVxufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQge0VudHJ5TGlzdH0gZnJvbSAnLi9lbnRyeUxpc3QnXG5pbXBvcnQge0pvdXJuYWxFbnRyeX0gZnJvbSAnLi9Kb3VybmFsRW50cnknXG5pbXBvcnQge3NlbGVjdEFuRW50cnl9IGZyb20gXCIuLi90ZXN0L2ludGVyYWN0aW9uc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEpvdXJuYWxQcm9wcyB7XG4gICAgZW50cmllczogSm91cm5hbEVudHJ5W107XG59XG5cbmludGVyZmFjZSBFZGl0b3JQcm9wcyB7XG4gICAgc2VsZWN0ZWRFbnRyeTogSm91cm5hbEVudHJ5XG59XG5cbmZ1bmN0aW9uIHNhZmVseVJlYWRUZXh0KHByb3BzOiBFZGl0b3JQcm9wcykge1xuICAgIHJldHVybiBwcm9wcy5zZWxlY3RlZEVudHJ5ICYmIHByb3BzLnNlbGVjdGVkRW50cnkudGV4dCB8fCBcIlwiO1xufVxuXG5jb25zdCBFZGl0b3JQYW5lID0gKHByb3BzOiBFZGl0b3JQcm9wcykgPT4ge1xuXG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0gc2FmZWx5UmVhZFRleHQocHJvcHMpO1xuICAgIGNvbnNvbGUubG9nKHtcbiAgICAgICAgaW5pdGlhbFN0YXRlLFxuICAgICAgICBzZWxlY3RlZDogcHJvcHMuc2VsZWN0ZWRFbnRyeVxuICAgIH0pXG4gICAgY29uc3QgW2VudHJ5VGV4dCwgc2V0RW50cnlUZXh0XSA9IFJlYWN0LnVzZVN0YXRlKGluaXRpYWxTdGF0ZSlcblxuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBzYWZlbHlSZWFkVGV4dChwcm9wcyk7XG4gICAgICAgIGlmICh0ZXh0ICE9PSBlbnRyeVRleHQpIHtcbiAgICAgICAgICAgIHNldEVudHJ5VGV4dCh0ZXh0KTtcbiAgICAgICAgfVxuICAgIH0sIFtwcm9wcy5zZWxlY3RlZEVudHJ5XSk7XG5cbiAgICBjb25zdCByZW5kZXJlZFRleHQgPSBwcm9wcy5zZWxlY3RlZEVudHJ5ICYmIHByb3BzLnNlbGVjdGVkRW50cnkudGV4dCB8fCBcIlwiXG5cbiAgICBjb25zdCB0ZXh0Q2hhbmdlZCA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MVGV4dEFyZWFFbGVtZW50PikgPT4ge1xuICAgICAgICBjb25zdCBuZXdUZXh0ID0gZS50YXJnZXQudmFsdWVcbiAgICAgICAgc2V0RW50cnlUZXh0KG5ld1RleHQpXG4gICAgfVxuXG4gICAgY29uc3QgZWRpdG9yU3R5bGUgPSB7XG4gICAgICAgIGZsZXhHcm93OiAxLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgICAgIGhlaWdodDogJzk2JSdcbiAgICB9XG5cbiAgICAvLyBoZXJlJ3Mgc29tZSBmdW4uIG5lZWQgdG8gZGVjbGFyZSB0aGlzIGlzIHRoZSBpbW11dGFibGUgc3RyaW5nIFwiY29sdW1uXG4gICAgLy8gZm9yIHNvbWUgcmVhc29uIHR5cGVzY3JpcHQgY2FuJ3QgdXNlIHRoZSByZWd1bGFyIHN0cmluZyDCr1xcXyjjg4QpXy/Cr1xuICAgIGNvbnN0IGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCIgPSBcImNvbHVtblwiXG4gICAgY29uc3QgZWRpdFdyYXBwZXJTdHlsZSA9IHtcbiAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246IGZsZXhEaXJlY3Rpb25cbiAgICB9XG5cbiAgICBjb25zdCBwYW5lU3R5bGUgPSB7XG4gICAgICAgIHdpZHRoOiBcIjkzJVwiLFxuICAgICAgICBtYXJnaW46IFwiMSUgMiVcIixcbiAgICAgICAgaGVpZ2h0OiBcIjkwJVwiXG4gICAgfVxuXG4gICAgY29uc3QgdGV4dEFyZWFTdHlsZSA9IHtcbiAgICAgICAgd2lkdGg6IFwiOTMlXCIsXG4gICAgICAgIG1hcmdpbjogXCIxJSAyJVwiLFxuICAgICAgICBoZWlnaHQ6IFwiOTAlXCIsXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBzdHlsZT17ZWRpdG9yU3R5bGV9IGNsYXNzTmFtZT1cImVkaXRvclwiPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT17ZWRpdFdyYXBwZXJTdHlsZX0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZGl0LXBhbmVcIiBzdHlsZT17cGFuZVN0eWxlfT5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgSm91cm5hbCBFbnRyeVxuICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3RleHRBcmVhU3R5bGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2VudHJ5VGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGV4dENoYW5nZWR9Lz5cbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbmRlcmVkXCIgc3R5bGU9e3BhbmVTdHlsZX0+XG4gICAgICAgICAgICAgICAgICAgIHtyZW5kZXJlZFRleHR9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKVxufVxuXG5leHBvcnQgY29uc3QgSm91cm5hbCA9IChwcm9wczogSm91cm5hbFByb3BzKSA9PiB7XG4gICAgY29uc3QgW3NlbGVjdGVkRW50cnksIHNldFNlbGVjdGVkRW50cnldID0gUmVhY3QudXNlU3RhdGUobnVsbCk7XG5cbiAgICBjb25zdCBzdHlsZXMgPSB7XG4gICAgICAgIHdpZHRoOiAnMTAwdncnLFxuICAgICAgICBoZWlnaHQ6ICcxMDB2aCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ2dyZXknLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBzdHlsZT17c3R5bGVzfT5cbiAgICAgICAgICAgIDxFbnRyeUxpc3QgZW50cmllcz17cHJvcHMuZW50cmllc30gc2VsZWN0RW50cnk9e3NldFNlbGVjdGVkRW50cnl9XG4gICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRW50cnk9e3NlbGVjdGVkRW50cnl9Lz5cbiAgICAgICAgICAgIDxFZGl0b3JQYW5lIHNlbGVjdGVkRW50cnk9e3NlbGVjdGVkRW50cnl9Lz5cbiAgICAgICAgPC9kaXY+XG4gICAgKVxufVxuIiwiaW1wb3J0IHtEYXRlU3RyaW5nfSBmcm9tICcuL2RhdGVTdHJpbmcnXG5cbmNvbnN0IHV1aWR2NCA9ICgpID0+XG4gICAgJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLFxuICAgICAgICBjID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwLFxuICAgICAgICAgICAgICAgIHYgPSBjID09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCk7XG4gICAgICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgICAgIH0pO1xuXG5leHBvcnQgY2xhc3MgSm91cm5hbEVudHJ5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcmVhZG9ubHkgZGF0ZTogRGF0ZVN0cmluZyxcbiAgICAgICAgcmVhZG9ubHkgdGl0bGU6IHN0cmluZyxcbiAgICAgICAgcmVhZG9ubHkgdGV4dDogc3RyaW5nLFxuICAgICAgICByZWFkb25seSBpZDogc3RyaW5nID0gdXVpZHY0KCkpIHtcbiAgICB9XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7Y3lyYjUzfSBmcm9tICcuL2ZhbmN5SGFzaCdcbmltcG9ydCB7RGF0ZVN0cmluZ30gZnJvbSAnLi9kYXRlU3RyaW5nJ1xuaW1wb3J0IHtKb3VybmFsRW50cnl9IGZyb20gJy4vSm91cm5hbEVudHJ5J1xuXG5pbnRlcmZhY2UgQ2FuU2VsZWN0RW50cnkge1xuICAgIHNlbGVjdEVudHJ5OiAoZTogSm91cm5hbEVudHJ5KSA9PiB2b2lkO1xuICAgIHNlbGVjdGVkRW50cnk6IEpvdXJuYWxFbnRyeTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbnRyeUxpc3RQcm9wc1xuICAgIGV4dGVuZHMgQ2FuU2VsZWN0RW50cnkge1xuICAgIGVudHJpZXM6IEpvdXJuYWxFbnRyeVtdO1xufVxuXG5pbnRlcmZhY2UgRGF0ZUdyb3VwUHJvcHNcbiAgICBleHRlbmRzIEVudHJ5TGlzdFByb3BzIHtcbiAgICBkYXRlOiBzdHJpbmcsXG59XG5cbmludGVyZmFjZSBFbnRyeVByb3BzXG4gICAgZXh0ZW5kcyBDYW5TZWxlY3RFbnRyeXtcbiAgICBlbnRyeTogSm91cm5hbEVudHJ5O1xufVxuXG5jb25zdCBFbnRyeSA9IChwcm9wczogRW50cnlQcm9wcykgPT4ge1xuXG4gICAgbGV0IGlzU2VsZWN0ZWQgPSBwcm9wcy5zZWxlY3RlZEVudHJ5ID09IHByb3BzLmVudHJ5XG5cbiAgICBjb25zdCBzZWxlY3QgPSAoKSA9PiB7XG4gICAgICAgIHByb3BzLnNlbGVjdEVudHJ5KHByb3BzLmVudHJ5KVxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9e2lzU2VsZWN0ZWQgPyAnZW50cnkgc2VsZWN0ZWQnIDogJ2VudHJ5J31cbiAgICAgICAgICAgIHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBpc1NlbGVjdGVkID8gXCJyZWRcIiA6IFwid2hpdGVcIn19XG4gICAgICAgICAgICBvbkNsaWNrPXtzZWxlY3R9PlxuICAgICAgICAgICAge3Byb3BzLmVudHJ5LnRpdGxlfVxuICAgICAgICA8L2Rpdj5cbiAgICApXG59XG5cbmNvbnN0IERhdGVHcm91cCA9IChwcm9wczogRGF0ZUdyb3VwUHJvcHMpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGF0ZScgZGF0YS1kYXRlPXtwcm9wcy5kYXRlfT5cbiAgICAgICAgICAgIDxoMT57cHJvcHMuZGF0ZX08L2gxPlxuICAgICAgICAgICAge3Byb3BzLmVudHJpZXMubWFwKGwgPT5cbiAgICAgICAgICAgICAgICA8RW50cnkga2V5PXtjeXJiNTMobC50aXRsZSl9IGVudHJ5PXtsfVxuICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RFbnRyeT17cHJvcHMuc2VsZWN0RW50cnl9XG4gICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRW50cnk9e3Byb3BzLnNlbGVjdGVkRW50cnl9XG4gICAgICAgICAgICAgICAgLz4pfVxuICAgICAgICA8L2Rpdj5cbiAgICApXG59XG5cbmNvbnN0IGFzRGF0ZUtleSA9ICh4OiBEYXRlU3RyaW5nIHwgc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICBpZiAoeCBpbnN0YW5jZW9mIERhdGVTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHgud2l0aG91dFRpbWUoKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZVN0cmluZyh4KS53aXRob3V0VGltZSgpXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgRW50cnlMaXN0ID0gKHByb3BzOiBFbnRyeUxpc3RQcm9wcykgPT4ge1xuICAgIGNvbnN0IGluaXRpYWw6IHsgW2RhdGVLZXk6IHN0cmluZ106IEpvdXJuYWxFbnRyeVtdIH0gPSB7fVxuICAgIGNvbnN0IGxpc3RpbmdCeURhdGU6IHsgW2RhdGVLZXk6IHN0cmluZ106IEpvdXJuYWxFbnRyeVtdIH0gPVxuICAgICAgICBwcm9wcy5lbnRyaWVzLnJlZHVjZSgoYWNjLCBsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gYXNEYXRlS2V5KGwuZGF0ZSlcbiAgICAgICAgICAgIGlmICghYWNjW2RhdGVLZXldKSB7XG4gICAgICAgICAgICAgICAgYWNjW2RhdGVLZXldID0gW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjY1tkYXRlS2V5XS5wdXNoKGwpXG4gICAgICAgICAgICByZXR1cm4gYWNjXG4gICAgICAgIH0sIGluaXRpYWwpXG5cbiAgICBjb25zdCBzdHlsZXMgPSB7XG4gICAgICAgIGJvcmRlclJpZ2h0OiAnYmxhY2sgNXB4IHNvbGlkJyxcbiAgICAgICAgd2lkdGg6ICcxMCUnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgICAgIGhlaWdodDogJzk2JSdcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbGlzdGluZycgc3R5bGU9e3N0eWxlc30+XG4gICAgICAgICAgICB7T2JqZWN0LmtleXMobGlzdGluZ0J5RGF0ZSlcbiAgICAgICAgICAgICAgICAubWFwKGRrID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzaGVkRGF0ZSA9IGN5cmI1MyhkaylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlR3JvdXAga2V5PXtoYXNoZWREYXRlfSBkYXRlPXtka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cmllcz17bGlzdGluZ0J5RGF0ZVtka119XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEVudHJ5PXtwcm9wcy5zZWxlY3RFbnRyeX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbnRyeT17cHJvcHMuc2VsZWN0ZWRFbnRyeX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+KVxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICA8L2Rpdj5cbiAgICApXG59XG4iLCJleHBvcnQgY2xhc3MgTXVzdEJlQVZhbGlkRGF0ZVN0cmluZyBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IgKGRhdGVTdHJpbmc6IHN0cmluZykge1xuICAgIHN1cGVyKGBcIiR7ZGF0ZVN0cmluZ31cIiBpcyBub3QgYSB2YWxpZCBkYXRlIHN0cmluZy4gaXQgc2hvdWxkIGJlIGFuIElTTy04NjAxIHN0cmluZ2ApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERhdGVTdHJpbmcge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgZHM6IHN0cmluZ1xuXG4gICAgY29uc3RydWN0b3IgKHM6IHN0cmluZykge1xuICAgICAgaWYgKE51bWJlci5pc05hTihEYXRlLnBhcnNlKHMpKSkge1xuICAgICAgICB0aHJvdyBuZXcgTXVzdEJlQVZhbGlkRGF0ZVN0cmluZyhzKVxuICAgICAgfVxuXG4gICAgICB0aGlzLmRzID0gc1xuICAgIH1cblxuICAgIGFzU3RyaW5nICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmRzXG4gICAgfVxuXG4gICAgd2l0aG91dFRpbWUgKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZHMuc3BsaXQoJ1QnKVswXVxuICAgIH1cbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgaHlkcmF0ZSB9IGZyb20gJ3JlYWN0LWRvbSdcbmltcG9ydCB7IEpvdXJuYWwgfSBmcm9tICcuL2pvdXJuYWwnXG5pbXBvcnQgeyBEYXRlU3RyaW5nIH0gZnJvbSAnLi9kYXRlU3RyaW5nJ1xuaW1wb3J0IHsgSm91cm5hbEVudHJ5IH0gZnJvbSAnLi9Kb3VybmFsRW50cnknXG5cbmNvbnN0IGEgPSBuZXcgSm91cm5hbEVudHJ5KG5ldyBEYXRlU3RyaW5nKCcyMDIwLTA3LTE4VDIyOjEwOjA2WicpLFxuICAnb25lJyxcbiAgJ2ZpcnN0eSdcbilcbmNvbnN0IGIgPSBuZXcgSm91cm5hbEVudHJ5KG5ldyBEYXRlU3RyaW5nKCcyMDIwLTA3LTE3VDIzOjEwOjA2WicpLFxuICAndHdvJyxcbiAgJ3NlY29uZHknXG4pXG5oeWRyYXRlKDxKb3VybmFsIGVudHJpZXM9e1thLCBiXX0gLz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JykpXG4iXSwic291cmNlUm9vdCI6IiJ9