!function(e){function t(t){for(var n,o,i=t[0],a=t[1],c=t[2],d=0,y=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(l,o)&&l[o]&&y.push(l[o][0]),l[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(u&&u(t);y.length;)y.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var a=r[i];0!==l[a]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},l={0:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=a;s.push(["tjUo",1]),r()}({"0TlM":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cyrb53=void 0,t.cyrb53=(e,t=0)=>{let r=3735928559^t,n=1103547991^t;for(let t,l=0;l<e.length;l++)t=e.charCodeAt(l),r=Math.imul(r^t,2654435761),n=Math.imul(n^t,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&n)+(r>>>0)}},"1/lR":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Journal=void 0;const n=r("q1tI"),l=r("7DOu");function s(e){return e.selectedEntry&&e.selectedEntry.text||""}const o=e=>{const t=s(e);console.log({initialState:t,selected:e.selectedEntry});const[r,l]=n.useState(t);n.useEffect(()=>{const t=s(e);t!==r&&l(t)},[e.selectedEntry]);const o=e.selectedEntry&&e.selectedEntry.text||"";return n.createElement("div",{style:{flexGrow:1,backgroundColor:"white",height:"96%"},className:"editor"},n.createElement("div",{className:"edit-pane"},n.createElement("label",null,"Journal Entry",n.createElement("textarea",{value:r,onChange:e=>{const t=e.target.value;l(t)}}))),n.createElement("div",{className:"rendered"},o))};t.Journal=e=>{const[t,r]=n.useState(null);return n.createElement("div",{style:{width:"100vw",height:"100vh",backgroundColor:"grey",display:"flex",alignItems:"center"}},n.createElement(l.EntryList,{entries:e.entries,selectEntry:r,selectedEntry:t}),n.createElement(o,{selectedEntry:t}))}},"4AsC":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JournalEntry=void 0;t.JournalEntry=class{constructor(e,t,r,n=(()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))()){this.date=e,this.title=t,this.text=r,this.id=n}}},"7DOu":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryList=void 0;const n=r("q1tI"),l=r("0TlM"),s=r("fsJt"),o=e=>{let t=e.selectedEntry==e.entry;return n.createElement("div",{className:t?"entry selected":"entry",style:{backgroundColor:t?"red":"white"},onClick:()=>{e.selectEntry(e.entry)}},e.entry.title)},i=e=>n.createElement("div",{className:"date","data-date":e.date},n.createElement("h1",null,e.date),e.entries.map(t=>n.createElement(o,{key:l.cyrb53(t.title),entry:t,selectEntry:e.selectEntry,selectedEntry:e.selectedEntry})));t.EntryList=e=>{const t=e.entries.reduce((e,t)=>{const r=(n=t.date)instanceof s.DateString?n.withoutTime():new s.DateString(n).withoutTime();var n;return e[r]||(e[r]=[]),e[r].push(t),e},{});return n.createElement("div",{className:"listing",style:{borderRight:"black 5px solid",width:"10%",backgroundColor:"white",height:"96%"}},Object.keys(t).map(r=>{const s=l.cyrb53(r);return n.createElement(i,{key:s,date:r,entries:t[r],selectEntry:e.selectEntry,selectedEntry:e.selectedEntry})}))}},fsJt:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateString=t.MustBeAValidDateString=void 0;class n extends Error{constructor(e){super(`"${e}" is not a valid date string. it should be an ISO-8601 string`)}}t.MustBeAValidDateString=n;t.DateString=class{constructor(e){if(Number.isNaN(Date.parse(e)))throw new n(e);this.ds=e}asString(){return this.ds}withoutTime(){return this.ds.split("T")[0]}}},tjUo:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("q1tI"),l=r("i8i4"),s=r("1/lR"),o=r("fsJt"),i=r("4AsC"),a=new i.JournalEntry(new o.DateString("2020-07-18T22:10:06Z"),"one","firsty"),c=new i.JournalEntry(new o.DateString("2020-07-17T23:10:06Z"),"two","secondy");l.hydrate(n.createElement(s.Journal,{entries:[a,c]}),document.getElementById("root"))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZhbmN5SGFzaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvam91cm5hbC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL0pvdXJuYWxFbnRyeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZW50cnlMaXN0LnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0ZVN0cmluZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHN4Il0sIm5hbWVzIjpbIndlYnBhY2tKc29ucENhbGxiYWNrIiwiZGF0YSIsIm1vZHVsZUlkIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJleGVjdXRlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiZGVmZXJyZWRNb2R1bGVzIiwiYXBwbHkiLCJjaGVja0RlZmVycmVkTW9kdWxlcyIsInJlc3VsdCIsImRlZmVycmVkTW9kdWxlIiwiZnVsZmlsbGVkIiwiaiIsImRlcElkIiwic3BsaWNlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiMCIsImV4cG9ydHMiLCJtb2R1bGUiLCJsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInAiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiY3lyYjUzIiwic3RyIiwic2VlZCIsImgxIiwiaDIiLCJjaCIsImNoYXJDb2RlQXQiLCJNYXRoIiwiaW11bCIsInNhZmVseVJlYWRUZXh0IiwicHJvcHMiLCJzZWxlY3RlZEVudHJ5IiwidGV4dCIsIkVkaXRvclBhbmUiLCJpbml0aWFsU3RhdGUiLCJjb25zb2xlIiwibG9nIiwic2VsZWN0ZWQiLCJlbnRyeVRleHQiLCJzZXRFbnRyeVRleHQiLCJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwicmVuZGVyZWRUZXh0Iiwic3R5bGUiLCJmbGV4R3JvdyIsImJhY2tncm91bmRDb2xvciIsImhlaWdodCIsImNsYXNzTmFtZSIsIm9uQ2hhbmdlIiwiZSIsIm5ld1RleHQiLCJ0YXJnZXQiLCJKb3VybmFsIiwic2V0U2VsZWN0ZWRFbnRyeSIsIndpZHRoIiwiZGlzcGxheSIsImFsaWduSXRlbXMiLCJFbnRyeUxpc3QiLCJlbnRyaWVzIiwic2VsZWN0RW50cnkiLCJkYXRlIiwidGl0bGUiLCJpZCIsInJlcGxhY2UiLCJyYW5kb20iLCJ0b1N0cmluZyIsInV1aWR2NCIsIkVudHJ5IiwiaXNTZWxlY3RlZCIsImVudHJ5Iiwib25DbGljayIsIkRhdGVHcm91cCIsIm1hcCIsImxpc3RpbmdCeURhdGUiLCJyZWR1Y2UiLCJhY2MiLCJkYXRlS2V5IiwieCIsIkRhdGVTdHJpbmciLCJ3aXRob3V0VGltZSIsImJvcmRlclJpZ2h0Iiwia2V5cyIsImRrIiwiaGFzaGVkRGF0ZSIsIk11c3RCZUFWYWxpZERhdGVTdHJpbmciLCJFcnJvciIsImRhdGVTdHJpbmciLCJzdXBlciIsIk51bWJlciIsImlzTmFOIiwiRGF0ZSIsInBhcnNlIiwidGhpcyIsImRzIiwic3BsaXQiLCJhIiwiSm91cm5hbEVudHJ5IiwiYiIsImh5ZHJhdGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiYUFDRSxTQUFTQSxFQUFxQkMsR0FRN0IsSUFQQSxJQU1JQyxFQUFVQyxFQU5WQyxFQUFXSCxFQUFLLEdBQ2hCSSxFQUFj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RCxtRUFGZCwyQkFNQSxtQkFHSSxZQUFhckcsR0FDWCxHQUFJdUcsT0FBT0MsTUFBTUMsS0FBS0MsTUFBTTFHLElBQzFCLE1BQU0sSUFBSW1HLEVBQXVCbkcsR0FHbkMyRyxLQUFLQyxHQUFLNUcsRUFHWixXQUNFLE9BQU8yRyxLQUFLQyxHQUdkLGNBQ0UsT0FBT0QsS0FBS0MsR0FBR0MsTUFBTSxLQUFLLE0sbUZDdEJoQyxrQkFDQSxZQUNBLFlBQ0EsWUFDQSxZQUVNQyxFQUFJLElBQUksRUFBQUMsYUFBYSxJQUFJLEVBQUFsQixXQUFXLHdCQUN4QyxNQUNBLFVBRUltQixFQUFJLElBQUksRUFBQUQsYUFBYSxJQUFJLEVBQUFsQixXQUFXLHdCQUN4QyxNQUNBLFdBRUYsRUFBQW9CLFFBQVEsZ0JBQUMsRUFBQTlDLFFBQU8sQ0FBQ00sUUFBUyxDQUFDcUMsRUFBR0UsS0FBUUUsU0FBU0MsZUFBZSIsImZpbGUiOiJtYWluLmYzYjE0MzY3MWEyNDI3ZjgxN2EyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhkYXRhKSB7XG4gXHRcdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG4gXHRcdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG4gXHRcdHZhciBleGVjdXRlTW9kdWxlcyA9IGRhdGFbMl07XG5cbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCByZXNvbHZlcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdHJlc29sdmVzLnB1c2goaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKTtcbiBcdFx0XHR9XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oZGF0YSk7XG5cbiBcdFx0d2hpbGUocmVzb2x2ZXMubGVuZ3RoKSB7XG4gXHRcdFx0cmVzb2x2ZXMuc2hpZnQoKSgpO1xuIFx0XHR9XG5cbiBcdFx0Ly8gYWRkIGVudHJ5IG1vZHVsZXMgZnJvbSBsb2FkZWQgY2h1bmsgdG8gZGVmZXJyZWQgbGlzdFxuIFx0XHRkZWZlcnJlZE1vZHVsZXMucHVzaC5hcHBseShkZWZlcnJlZE1vZHVsZXMsIGV4ZWN1dGVNb2R1bGVzIHx8IFtdKTtcblxuIFx0XHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIGFsbCBjaHVua3MgcmVhZHlcbiBcdFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4gXHR9O1xuIFx0ZnVuY3Rpb24gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKSB7XG4gXHRcdHZhciByZXN1bHQ7XG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHR2YXIgZGVmZXJyZWRNb2R1bGUgPSBkZWZlcnJlZE1vZHVsZXNbaV07XG4gXHRcdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG4gXHRcdFx0Zm9yKHZhciBqID0gMTsgaiA8IGRlZmVycmVkTW9kdWxlLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHR2YXIgZGVwSWQgPSBkZWZlcnJlZE1vZHVsZVtqXTtcbiBcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tkZXBJZF0gIT09IDApIGZ1bGZpbGxlZCA9IGZhbHNlO1xuIFx0XHRcdH1cbiBcdFx0XHRpZihmdWxmaWxsZWQpIHtcbiBcdFx0XHRcdGRlZmVycmVkTW9kdWxlcy5zcGxpY2UoaS0tLCAxKTtcbiBcdFx0XHRcdHJlc3VsdCA9IF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gZGVmZXJyZWRNb2R1bGVbMF0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdHJldHVybiByZXN1bHQ7XG4gXHR9XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbiBcdC8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHQwOiAwXG4gXHR9O1xuXG4gXHR2YXIgZGVmZXJyZWRNb2R1bGVzID0gW107XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wXCJdID0gd2luZG93W1wid2VicGFja0pzb25wXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBhZGQgZW50cnkgbW9kdWxlIHRvIGRlZmVycmVkIGxpc3RcbiBcdGRlZmVycmVkTW9kdWxlcy5wdXNoKFtcInRqVW9cIiwxXSk7XG4gXHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIHJlYWR5XG4gXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiIsImV4cG9ydCBjb25zdCBjeXJiNTMgPSAoc3RyOiBzdHJpbmcsIHNlZWQgPSAwKSA9PiB7XG4gIGxldCBoMSA9IDB4ZGVhZGJlZWYgXiBzZWVkXG4gIGxldCBoMiA9IDB4NDFjNmNlNTcgXiBzZWVkXG5cbiAgZm9yIChsZXQgaSA9IDAsIGNoOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgY2ggPSBzdHIuY2hhckNvZGVBdChpKVxuICAgIGgxID0gTWF0aC5pbXVsKGgxIF4gY2gsIDI2NTQ0MzU3NjEpXG4gICAgaDIgPSBNYXRoLmltdWwoaDIgXiBjaCwgMTU5NzMzNDY3NylcbiAgfVxuICBoMSA9IE1hdGguaW11bChoMSBeIGgxID4+PiAxNiwgMjI0NjgyMjUwNykgXiBNYXRoLmltdWwoaDIgXiBoMiA+Pj4gMTMsIDMyNjY0ODk5MDkpXG4gIGgyID0gTWF0aC5pbXVsKGgyIF4gaDIgPj4+IDE2LCAyMjQ2ODIyNTA3KSBeIE1hdGguaW11bChoMSBeIGgxID4+PiAxMywgMzI2NjQ4OTkwOSlcbiAgcmV0dXJuIDQyOTQ5NjcyOTYgKiAoMjA5NzE1MSAmIGgyKSArIChoMSA+Pj4gMClcbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHtFbnRyeUxpc3R9IGZyb20gJy4vZW50cnlMaXN0J1xuaW1wb3J0IHtKb3VybmFsRW50cnl9IGZyb20gJy4vSm91cm5hbEVudHJ5J1xuaW1wb3J0IHtzZWxlY3RBbkVudHJ5fSBmcm9tIFwiLi4vdGVzdC9pbnRlcmFjdGlvbnNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBKb3VybmFsUHJvcHMge1xuICAgIGVudHJpZXM6IEpvdXJuYWxFbnRyeVtdO1xufVxuXG5pbnRlcmZhY2UgRWRpdG9yUHJvcHMge1xuICAgIHNlbGVjdGVkRW50cnk6IEpvdXJuYWxFbnRyeVxufVxuXG5mdW5jdGlvbiBzYWZlbHlSZWFkVGV4dChwcm9wczogRWRpdG9yUHJvcHMpIHtcbiAgICByZXR1cm4gcHJvcHMuc2VsZWN0ZWRFbnRyeSAmJiBwcm9wcy5zZWxlY3RlZEVudHJ5LnRleHQgfHwgXCJcIjtcbn1cblxuY29uc3QgRWRpdG9yUGFuZSA9IChwcm9wczogRWRpdG9yUHJvcHMpID0+IHtcbiAgICBjb25zdCBzdHlsZXMgPSB7XG4gICAgICAgIGZsZXhHcm93OiAxLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgICAgIGhlaWdodDogJzk2JSdcbiAgICB9XG5cbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSBzYWZlbHlSZWFkVGV4dChwcm9wcyk7XG4gICAgY29uc29sZS5sb2coe1xuICAgICAgICBpbml0aWFsU3RhdGUsXG4gICAgICAgIHNlbGVjdGVkOiBwcm9wcy5zZWxlY3RlZEVudHJ5XG4gICAgfSlcbiAgICBjb25zdCBbZW50cnlUZXh0LCBzZXRFbnRyeVRleHRdID0gUmVhY3QudXNlU3RhdGUoaW5pdGlhbFN0YXRlKVxuXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3QgdGV4dCA9IHNhZmVseVJlYWRUZXh0KHByb3BzKTtcbiAgICAgICAgaWYgKHRleHQgIT09IGVudHJ5VGV4dCkge1xuICAgICAgICAgICAgc2V0RW50cnlUZXh0KHRleHQpO1xuICAgICAgICB9XG4gICAgfSwgW3Byb3BzLnNlbGVjdGVkRW50cnldKTtcblxuICAgIGNvbnN0IHJlbmRlcmVkVGV4dCA9IHByb3BzLnNlbGVjdGVkRW50cnkgJiYgcHJvcHMuc2VsZWN0ZWRFbnRyeS50ZXh0IHx8IFwiXCJcblxuICAgIGNvbnN0IHRleHRDaGFuZ2VkID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxUZXh0QXJlYUVsZW1lbnQ+KSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1RleHQgPSBlLnRhcmdldC52YWx1ZVxuICAgICAgICBzZXRFbnRyeVRleHQobmV3VGV4dClcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IHN0eWxlPXtzdHlsZXN9IGNsYXNzTmFtZT1cImVkaXRvclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZGl0LXBhbmVcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIEpvdXJuYWwgRW50cnlcbiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZW50cnlUZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RleHRDaGFuZ2VkfS8+XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZW5kZXJlZFwiPlxuICAgICAgICAgICAgICAgIHtyZW5kZXJlZFRleHR9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKVxufVxuXG5leHBvcnQgY29uc3QgSm91cm5hbCA9IChwcm9wczogSm91cm5hbFByb3BzKSA9PiB7XG4gICAgY29uc3QgW3NlbGVjdGVkRW50cnksIHNldFNlbGVjdGVkRW50cnldID0gUmVhY3QudXNlU3RhdGUobnVsbCk7XG5cbiAgICBjb25zdCBzdHlsZXMgPSB7XG4gICAgICAgIHdpZHRoOiAnMTAwdncnLFxuICAgICAgICBoZWlnaHQ6ICcxMDB2aCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ2dyZXknLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBzdHlsZT17c3R5bGVzfT5cbiAgICAgICAgICAgIDxFbnRyeUxpc3QgZW50cmllcz17cHJvcHMuZW50cmllc30gc2VsZWN0RW50cnk9e3NldFNlbGVjdGVkRW50cnl9XG4gICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRW50cnk9e3NlbGVjdGVkRW50cnl9Lz5cbiAgICAgICAgICAgIDxFZGl0b3JQYW5lIHNlbGVjdGVkRW50cnk9e3NlbGVjdGVkRW50cnl9Lz5cbiAgICAgICAgPC9kaXY+XG4gICAgKVxufVxuIiwiaW1wb3J0IHtEYXRlU3RyaW5nfSBmcm9tICcuL2RhdGVTdHJpbmcnXG5cbmNvbnN0IHV1aWR2NCA9ICgpID0+XG4gICAgJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLFxuICAgICAgICBjID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwLFxuICAgICAgICAgICAgICAgIHYgPSBjID09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCk7XG4gICAgICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgICAgIH0pO1xuXG5leHBvcnQgY2xhc3MgSm91cm5hbEVudHJ5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcmVhZG9ubHkgZGF0ZTogRGF0ZVN0cmluZyxcbiAgICAgICAgcmVhZG9ubHkgdGl0bGU6IHN0cmluZyxcbiAgICAgICAgcmVhZG9ubHkgdGV4dDogc3RyaW5nLFxuICAgICAgICByZWFkb25seSBpZDogc3RyaW5nID0gdXVpZHY0KCkpIHtcbiAgICB9XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7Y3lyYjUzfSBmcm9tICcuL2ZhbmN5SGFzaCdcbmltcG9ydCB7RGF0ZVN0cmluZ30gZnJvbSAnLi9kYXRlU3RyaW5nJ1xuaW1wb3J0IHtKb3VybmFsRW50cnl9IGZyb20gJy4vSm91cm5hbEVudHJ5J1xuXG5pbnRlcmZhY2UgQ2FuU2VsZWN0RW50cnkge1xuICAgIHNlbGVjdEVudHJ5OiAoZTogSm91cm5hbEVudHJ5KSA9PiB2b2lkO1xuICAgIHNlbGVjdGVkRW50cnk6IEpvdXJuYWxFbnRyeTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbnRyeUxpc3RQcm9wc1xuICAgIGV4dGVuZHMgQ2FuU2VsZWN0RW50cnkge1xuICAgIGVudHJpZXM6IEpvdXJuYWxFbnRyeVtdO1xufVxuXG5pbnRlcmZhY2UgRGF0ZUdyb3VwUHJvcHNcbiAgICBleHRlbmRzIEVudHJ5TGlzdFByb3BzIHtcbiAgICBkYXRlOiBzdHJpbmcsXG59XG5cbmludGVyZmFjZSBFbnRyeVByb3BzXG4gICAgZXh0ZW5kcyBDYW5TZWxlY3RFbnRyeXtcbiAgICBlbnRyeTogSm91cm5hbEVudHJ5O1xufVxuXG5jb25zdCBFbnRyeSA9IChwcm9wczogRW50cnlQcm9wcykgPT4ge1xuXG4gICAgbGV0IGlzU2VsZWN0ZWQgPSBwcm9wcy5zZWxlY3RlZEVudHJ5ID09IHByb3BzLmVudHJ5XG5cbiAgICBjb25zdCBzZWxlY3QgPSAoKSA9PiB7XG4gICAgICAgIHByb3BzLnNlbGVjdEVudHJ5KHByb3BzLmVudHJ5KVxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9e2lzU2VsZWN0ZWQgPyAnZW50cnkgc2VsZWN0ZWQnIDogJ2VudHJ5J31cbiAgICAgICAgICAgIHN0eWxlPXt7YmFja2dyb3VuZENvbG9yOiBpc1NlbGVjdGVkID8gXCJyZWRcIiA6IFwid2hpdGVcIn19XG4gICAgICAgICAgICBvbkNsaWNrPXtzZWxlY3R9PlxuICAgICAgICAgICAge3Byb3BzLmVudHJ5LnRpdGxlfVxuICAgICAgICA8L2Rpdj5cbiAgICApXG59XG5cbmNvbnN0IERhdGVHcm91cCA9IChwcm9wczogRGF0ZUdyb3VwUHJvcHMpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGF0ZScgZGF0YS1kYXRlPXtwcm9wcy5kYXRlfT5cbiAgICAgICAgICAgIDxoMT57cHJvcHMuZGF0ZX08L2gxPlxuICAgICAgICAgICAge3Byb3BzLmVudHJpZXMubWFwKGwgPT5cbiAgICAgICAgICAgICAgICA8RW50cnkga2V5PXtjeXJiNTMobC50aXRsZSl9IGVudHJ5PXtsfVxuICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RFbnRyeT17cHJvcHMuc2VsZWN0RW50cnl9XG4gICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRW50cnk9e3Byb3BzLnNlbGVjdGVkRW50cnl9XG4gICAgICAgICAgICAgICAgLz4pfVxuICAgICAgICA8L2Rpdj5cbiAgICApXG59XG5cbmNvbnN0IGFzRGF0ZUtleSA9ICh4OiBEYXRlU3RyaW5nIHwgc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICBpZiAoeCBpbnN0YW5jZW9mIERhdGVTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHgud2l0aG91dFRpbWUoKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZVN0cmluZyh4KS53aXRob3V0VGltZSgpXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgRW50cnlMaXN0ID0gKHByb3BzOiBFbnRyeUxpc3RQcm9wcykgPT4ge1xuICAgIGNvbnN0IGluaXRpYWw6IHsgW2RhdGVLZXk6IHN0cmluZ106IEpvdXJuYWxFbnRyeVtdIH0gPSB7fVxuICAgIGNvbnN0IGxpc3RpbmdCeURhdGU6IHsgW2RhdGVLZXk6IHN0cmluZ106IEpvdXJuYWxFbnRyeVtdIH0gPVxuICAgICAgICBwcm9wcy5lbnRyaWVzLnJlZHVjZSgoYWNjLCBsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRlS2V5ID0gYXNEYXRlS2V5KGwuZGF0ZSlcbiAgICAgICAgICAgIGlmICghYWNjW2RhdGVLZXldKSB7XG4gICAgICAgICAgICAgICAgYWNjW2RhdGVLZXldID0gW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjY1tkYXRlS2V5XS5wdXNoKGwpXG4gICAgICAgICAgICByZXR1cm4gYWNjXG4gICAgICAgIH0sIGluaXRpYWwpXG5cbiAgICBjb25zdCBzdHlsZXMgPSB7XG4gICAgICAgIGJvcmRlclJpZ2h0OiAnYmxhY2sgNXB4IHNvbGlkJyxcbiAgICAgICAgd2lkdGg6ICcxMCUnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZScsXG4gICAgICAgIGhlaWdodDogJzk2JSdcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbGlzdGluZycgc3R5bGU9e3N0eWxlc30+XG4gICAgICAgICAgICB7T2JqZWN0LmtleXMobGlzdGluZ0J5RGF0ZSlcbiAgICAgICAgICAgICAgICAubWFwKGRrID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzaGVkRGF0ZSA9IGN5cmI1MyhkaylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlR3JvdXAga2V5PXtoYXNoZWREYXRlfSBkYXRlPXtka31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50cmllcz17bGlzdGluZ0J5RGF0ZVtka119XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEVudHJ5PXtwcm9wcy5zZWxlY3RFbnRyeX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbnRyeT17cHJvcHMuc2VsZWN0ZWRFbnRyeX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+KVxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICA8L2Rpdj5cbiAgICApXG59XG4iLCJleHBvcnQgY2xhc3MgTXVzdEJlQVZhbGlkRGF0ZVN0cmluZyBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IgKGRhdGVTdHJpbmc6IHN0cmluZykge1xuICAgIHN1cGVyKGBcIiR7ZGF0ZVN0cmluZ31cIiBpcyBub3QgYSB2YWxpZCBkYXRlIHN0cmluZy4gaXQgc2hvdWxkIGJlIGFuIElTTy04NjAxIHN0cmluZ2ApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERhdGVTdHJpbmcge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgZHM6IHN0cmluZ1xuXG4gICAgY29uc3RydWN0b3IgKHM6IHN0cmluZykge1xuICAgICAgaWYgKE51bWJlci5pc05hTihEYXRlLnBhcnNlKHMpKSkge1xuICAgICAgICB0aHJvdyBuZXcgTXVzdEJlQVZhbGlkRGF0ZVN0cmluZyhzKVxuICAgICAgfVxuXG4gICAgICB0aGlzLmRzID0gc1xuICAgIH1cblxuICAgIGFzU3RyaW5nICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmRzXG4gICAgfVxuXG4gICAgd2l0aG91dFRpbWUgKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZHMuc3BsaXQoJ1QnKVswXVxuICAgIH1cbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgaHlkcmF0ZSB9IGZyb20gJ3JlYWN0LWRvbSdcbmltcG9ydCB7IEpvdXJuYWwgfSBmcm9tICcuL2pvdXJuYWwnXG5pbXBvcnQgeyBEYXRlU3RyaW5nIH0gZnJvbSAnLi9kYXRlU3RyaW5nJ1xuaW1wb3J0IHsgSm91cm5hbEVudHJ5IH0gZnJvbSAnLi9Kb3VybmFsRW50cnknXG5cbmNvbnN0IGEgPSBuZXcgSm91cm5hbEVudHJ5KG5ldyBEYXRlU3RyaW5nKCcyMDIwLTA3LTE4VDIyOjEwOjA2WicpLFxuICAnb25lJyxcbiAgJ2ZpcnN0eSdcbilcbmNvbnN0IGIgPSBuZXcgSm91cm5hbEVudHJ5KG5ldyBEYXRlU3RyaW5nKCcyMDIwLTA3LTE3VDIzOjEwOjA2WicpLFxuICAndHdvJyxcbiAgJ3NlY29uZHknXG4pXG5oeWRyYXRlKDxKb3VybmFsIGVudHJpZXM9e1thLCBiXX0gLz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JykpXG4iXSwic291cmNlUm9vdCI6IiJ9